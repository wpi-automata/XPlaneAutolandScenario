# XPlaneAutolandScenario
This is an autolanding scenario using the X-Plane simulator for the Grant County airport Runway 04.
The module is intended as a research tool for verification with learning-enabled components in the loop.

The `xpc3_helper.py` code is an extension of the Stanford [NASA_ULI_Xplane_Simulator](https://github.com/StanfordASL/NASA_ULI_Xplane_Simulator/tree/sim_v2/src) code.

## Quickstart
Create a Python virtual environment using at least Python 3.7.
```
python3 -m venv ./env
```
Activate your environment and install the module (run from the top-level of this repository):
```
source ./env/bin/activate
pip install -e .
```

Download and install X-Plane 11 from [here](https://www.x-plane.com/desktop/try-it/older/).

### XPlaneConnect
Set up `XPlaneConnect` for communicating with `X-Plane` via `Python`.
Download `XPlaneConnect` version 1.2.0 from the [releases](https://github.com/nasa/XPlaneConnect/releases).
Navigate to `X-Plane 11/Resources/plugins` and extract the downloaded zip to this location.

### XCamera
Download `XCamera` from [here](https://stickandrudderstudios.com/x-camera/download-x-camera/) and extract to `X-Plane 11/Resources/plugins`.
From the plugins drop down menu, you can select XCamera and use the control panel to create and place different camera views.

### Run Autolander

Launch X-Plane 11 and start a flight with a Cessna Skyhawk at Grant Co Airport (KMWH).
Run `run_autoland.py` from within the Python virtual environment. This will land the plane using perfect state information.

### File Information for Ava branches (WPI)

[Notes on the variables used throughout these files](https://www.overleaf.com/read/scbkxkjcdmjm#5af6f2)

**ava-dev branch:**
- safe_set.py: Processes data collected by place_and_collect.py into 'safe' and 'unsafe' subsets based on a 3.5deg angle from the center of the glidescope.
- keep_h_collect.py: A version of train.py meant to ignore h_err when training. Does not produce usable models. 
- AutolandBehavior.mlx: Displays data collected by run_autoland.py when --collect parameter is set to True.
- LossDisplay.mlx: Processes output log from train.py and displays the losses recorded.
- SafeSetErrorComp.mlx: Displays error relations for the safe set generated by safe_set.py
- SafeSetSanityCheck.mlx: Sanity checking file to make sure safe_set.py generated data that fell within the 3.5deg 'safe' cone.
- train_slurm.sh: Partial slurm file for running train.py on WPI HPC resources. 
